<!doctype html><html lang=zh-CN><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="This is Yon Zilch's Blog." name=description><title>
         利用 Render 部署 wiki.js
        
    </title><meta content="利用 Render 部署 wiki.js" property=og:title><link href=https://static.yon.im/image/avatar.webp rel=icon type=image/png><link title="Yon Zilch" href=https://blog.yon.im/atom.xml rel=alternate type=application/atom+xml><link href=https://blog.yon.im/theme/light.css rel=stylesheet><link href=https://blog.yon.im/theme/dark.css id=darkModeStyle rel=stylesheet><link href=https://blog.yon.im/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://blog.yon.im>Yon Zilch</a><div class=socials><a rel="me noopener noreferrer" class=social href=/atom.xml target=_blank> <img alt=rss src=/social_icons/rss.svg> </a><a rel="me noopener noreferrer" class=social href=https://codeberg.org/yonzilch target=_blank> <img alt=CodeBerg src=/social_icons/codeberg.svg> </a><a rel="me noopener noreferrer" class=social href=https://github.com/yonzilch target=_blank> <img alt=GitHub src=/social_icons/github.svg> </a><a rel="me noopener noreferrer" class=social href=https://t.me/yonzilch target=_blank> <img alt=Telegram src=/social_icons/telegram.svg> </a><a rel="me noopener noreferrer" class=social href=https://mastodon.social/@yonzilch target=_blank> <img alt=Mastodon src=/social_icons/mastodon.svg> </a></div></div><nav><a href=/posts style=margin-left:.7em>/posts</a><a href=/about style=margin-left:.7em>/about</a><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=/feather/sun.svg style=filter:invert(1)> <img alt=Dark id=moon-icon src=/feather/moon.svg> </a><script src=https://blog.yon.im/js/themetoggle.js></script></nav></header><main><article><div class=title><div class=page-header>利用 Render 部署 wiki.js<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2023-09-17</time></div></div><h1>Table of Contents</h1><ul><li><a href=https://blog.yon.im/posts/use-render-deploy-wiki-js/#xu-yao-zhu-ce-shi-yong>需要注册使用：</a><li><a href=https://blog.yon.im/posts/use-render-deploy-wiki-js/#bu-shu>部署</a> <ul><li><a href=https://blog.yon.im/posts/use-render-deploy-wiki-js/#gai-lan>概览：</a><li><a href=https://blog.yon.im/posts/use-render-deploy-wiki-js/#kai-shi-shi-zhan-bu-shu>开始实战部署：</a></li><ul><li><a href=https://blog.yon.im/posts/use-render-deploy-wiki-js/#neon-shang-de-cao-zuo>NEON 上的操作</a><li><a href=https://blog.yon.im/posts/use-render-deploy-wiki-js/#render-shang-de-cao-zuo>Render 上的操作：</a><li><a href=https://blog.yon.im/posts/use-render-deploy-wiki-js/#hetrixtools-shang-de-cao-zuo>Hetrixtools 上的操作：</a></ul></ul><li><a href=https://blog.yon.im/posts/use-render-deploy-wiki-js/#fu-lu>附录：</a></ul><section class=body><p>（应 <a href=https://milvoid.com/>Milvoid</a> 需求撰写）<h2 id=xu-yao-zhu-ce-shi-yong>需要注册使用：</h2><ul><li>https://neon.tech/<li>https://render.com/<li>https://hetrixtools.com/</ul><h2 id=bu-shu>部署</h2><h4 id=gai-lan>概览：</h4><p>Render 作为 ServerLess 服务器运行 wiki.js Docker 容器 wiki.js 通过配置好的 env(环境变量) 连接 NEON Postgres 数据库 配置 Hetrixtools 定时检查 部署好的 wiki-js 站点，来实现持续运行（保活）<hr><h3 id=kai-shi-shi-zhan-bu-shu>开始实战部署：</h3><h4 id=neon-shang-de-cao-zuo>NEON 上的操作</h4><ol><li></ol><p>创建数据库项目（地区请选择 Oragon） <img alt=1 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/1.webp><ol start=2><li></ol><p>复制所给的环境变量（之后要用） Tip：可以临时放到 VScode 之类的文本编辑器里 <img alt=2 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/2.webp><p>Over<h4 id=render-shang-de-cao-zuo>Render 上的操作：</h4><ol><li></ol><p>创建一个 Web Service， 并将我写的 Docker 部署 wiki-js 的 <a href=https://github.com/gityzon/docker-wiki-js>Github仓库地址</a> 填入框中， 然后 "Continue" <img alt=3 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/3.webp><ol start=2><li></ol><p>自定义项目名称（这边演示填入了"wiki-js"）， 以及确认项目部署的边缘服务器地区（建议选择 Oregon ，测试中速度表现最好） <img alt=4 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/4.webp><ol start=3><li></ol><p>添加连接 NEON 数据库的环境变量 <img alt=5 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/5.webp><p>运行 wiki-js 所需的环境变量 与 NEON 中所给的名称并不一致， 请参照图片以及以下提示填入：<pre style=background:#0f1419;color:#bfbab0><code><span>DB_HOST 为 PGHOST
</span><span>DB_NAME 为 PGDATABASE
</span><span>DB_PASS 为 PGPASSWORD
</span><span>DB_USER 为 PGUSER
</span><span>
</span><span>其他：
</span><span>
</span><span>DB_PORT 请设为 5432
</span><span>DB_SSL 请设为 true
</span><span>DB_TYPE 请设为 postgres
</span></code></pre><ol start=4><li></ol><p>建议关闭 Auto-Deploy 自动部署<p><img alt=6 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/6.webp> 5. 最后点下 "Create Web Service" 等待wiki-js部署完成（大概几分钟）<ol start=6><li></ol><p>出现下图 "Live" 状态，即表示 wiki-js 已成功部署 （方框里的域名是 Render给的 二级域名） <img alt=7 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/7.webp><ol start=7><li></ol><p>此时可以先在项目 "Settings" 绑定域名 <img alt=8 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/8.webp><ol start=8><li></ol><p>（此处演示直接使用 Render 预置的域名 进行后续操作）<p>这里刚刚部署完可能会提示“网页无法正常运作” 请隔一会刷新以下，等待 wiki-js服务响应 <img alt=9 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/9.webp><p>出现了创建管理员界面，请自行创建用户<p><img alt=10 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/10.webp><p>Install 后 wiki-js 可能会出现无响应，请等待片刻（此时服务器在初始化数据库，并构建页面树）<p>下图即是主界面（Home Page） <img alt=11 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/11.webp><p>下图是登录界面<p><img alt=12 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/12.webp><p>通过下图操作来设置中文<p><img alt=13 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/13.webp><hr><p><strong>至此，wiki-js 部署完毕！</strong><p>下面是使用 Hetrixtools 监控 wiki-js 网站 实现保活的教程<h4 id=hetrixtools-shang-de-cao-zuo>Hetrixtools 上的操作：</h4><p>看图自行操作，不多说明 <img alt=14 src=https://static.yon.im/image/blog/use-render-deploy-wiki-js/14.webp><h2 id=fu-lu>附录：</h2><p>https://github.com/requarks/wiki</section></article></main></div>